{"version":3,"sources":["components/filter-courses/filter.js","utils/range.js","components/course/course.js","components/courses/courses.js","hooks/useFetch.js","components/errorMessage.js","components/showcase.js","App.js","index.js"],"names":["FilterCourses","props","start","stop","setCourses","fetchedCourses","courses","subjects","useState","subject","setSubject","genres","genre","setGenre","grades","Array","from","length","_","i","grade","setGrade","searchString","setSearchString","useEffect","filteredCourses","filter","course","includes","className","id","name","value","onChange","event","target","map","index","type","placeholder","onClick","preventDefault","title","Course","isRub","isClicked","setIsClicked","document","getElementById","courseHash","innerText","price","priceBonus","style","maxWidth","src","courseId","alt","split","formatGrade","href","e","Courses","setIsRub","https","require","ErrorMessage","err","Showcase","url","isLoading","setIsLoading","response","setResponse","error","setError","options","setOptions","doFetch","useCallback","requestOptions","httpsAgent","Agent","rejectUnauthorized","axios","then","res","console","log","data","catch","useFetch","method","setFetchedCourses","items","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.2ca4d537.chunk.js","sourcesContent":["import {useState, useEffect} from 'react'\r\nimport {range} from \"../../utils/range\";\r\n\r\nconst FilterCourses = props => {\r\n    const setCourses = props.setCourses\r\n    const fetchedCourses = props.courses\r\n\r\n    const subjects = [\r\n        \"Все предметы\", \"Алгебра\",  \"Биология\",\r\n        \"География\", \"Геометрия\", \"Информатика\",\r\n        \"История\", \"Литература\", \"Математика\", \"Обществознание\",\r\n        \"Окружающий мир\", \"Робототехника\", \"Русский язык\", \"Физика\", \"Химия\"\r\n    ]\r\n\r\n    const [subject, setSubject] = useState(subjects[0])\r\n\r\n    const genres = [\r\n        \"Все жанры\", \"Демо\", \"Задачник\", \"Подготовка к ВПР\", \"Подготовка к ЕГЭ\", \"Рабочая тетрадь\"\r\n    ]\r\n\r\n    const [genre, setGenre] = useState(genres[0])\r\n\r\n    const grades = [\"Все классы\", ...range(1, 12)];\r\n\r\n    const [grade, setGrade] = useState(grades[0])\r\n\r\n    const [searchString, setSearchString] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        let filteredCourses = fetchedCourses\r\n\r\n        if (subject !== subjects[0]) {\r\n            filteredCourses = filteredCourses.filter(course => course.subject === subject)\r\n        }\r\n\r\n        if (genre !== genres[0]) {\r\n            filteredCourses = filteredCourses.filter(course => course.genre === genre)\r\n        }\r\n\r\n        if (grade != grades[0]) {\r\n            filteredCourses = filteredCourses.filter(course => course.grade.includes(grade))\r\n        }\r\n\r\n        if (searchString !== \"\") {\r\n            filteredCourses = filteredCourses.filter(\r\n                course => course.grade.includes(searchString)\r\n                    || course.genre.includes(searchString)\r\n                    || course.subject.includes(searchString)\r\n            )\r\n        }\r\n\r\n        setCourses(filteredCourses)\r\n\r\n    }, [subject, setSubject, genre, setGenre, grade, setGrade, setSearchString, searchString])\r\n\r\n\r\n    return (\r\n        <div className=\"courses-filter u-mt-30\">\r\n            <form id=\"filterform\" >\r\n                    <select id=\"subject\" name=\"subject\" value={subject} onChange={event => setSubject(event.target.value)} >\r\n                        {\r\n                            subjects.map((subject, index) => (\r\n                                <option key={index} value={subject}>{subject}</option>\r\n                            ))\r\n                        }\r\n                    </select>\r\n                    <select name=\"genre\" id=\"genre\" value={genre} onChange={event => setGenre(event.target.value)}>\r\n                        {\r\n                            genres.map((genre, index) => (\r\n                                <option key={index} value={genre}>{genre}</option>\r\n                            ))\r\n                        }\r\n                    </select>\r\n                    <select name=\"grade\" id=\"grade\" value={grade} onChange={event => setGrade(event.target.value)}>\r\n                        {\r\n                            grades.map((grade, index) => (\r\n                                <option key={index} value={grade}>{grade}</option>\r\n                            ))\r\n                        }\r\n                    </select>\r\n\r\n                <div className=\"search\">\r\n                    <input\r\n                        className=\"borderFind\"\r\n                        type=\"text\"\r\n                        placeholder=\"Поиск\"\r\n                        id=\"search\"\r\n                        name=\"search\"\r\n                        value={searchString}\r\n                        onChange={event => setSearchString(event.target.value)}\r\n                    />\r\n                    <button\r\n                        onClick={event => event.preventDefault()}\r\n                        className=\"courses-filter-search-btn\"\r\n                        type=\"submit\"\r\n                        title=\"Найти\"\r\n                    >\r\n\r\n                    </button>\r\n                </div>\r\n\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FilterCourses","export const range = (start, stop) => {\r\n    return Array.from({\r\n            length: (stop - start)\r\n        },\r\n        (_, i) => start + (i)\r\n    );\r\n\r\n}","import './course.css'\r\nimport {useEffect, useState} from 'react'\r\n\r\nconst Course = props => {\r\n    const course = props.course\r\n    const isRub = props.isRub\r\n\r\n    const [isClicked, setIsClicked] = useState(false)\r\n\r\n    const formatGrade = (grade) => {\r\n        let grades = grade.split(\";\")\r\n        if (grades.length === 1)\r\n            return grades[0] + \" класс\"\r\n\r\n        return grades[0] + \"-\" + grades[grades.length - 1] + \" классы\"\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!isClicked) {\r\n            return\r\n        }\r\n\r\n        document.getElementById(`tryButton${course.courseHash}`)\r\n            .innerText = isRub ? course.price + \" рублей\" : course.priceBonus + \" бонусов\"\r\n    }, [isClicked, setIsClicked, isRub])\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className=\"course-figure\">\r\n                <img style={{maxWidth: '100%'}} src={`./img/coursecovers/${course.courseId}.jpg`} alt={props.subject}/>\r\n            </div>\r\n\r\n            <div className=\"course-info\">\r\n                <p className=\"course-title\">\r\n                    {course.subject}\r\n                </p>\r\n                <p className=\"course-grade\">\r\n                    {formatGrade(course.grade)}\r\n                </p>\r\n                <p className=\"course-genre\">\r\n                    {course.genre}\r\n                </p>\r\n\r\n                <p className=\"course-meta\">\r\n                    <a href=\"#\">Подробнее</a>\r\n                </p>\r\n                <p className=\"course-controls\">\r\n                    <a onClick={e => {e.preventDefault(); setIsClicked(true)}} className=\"btn-fluid\" id={`tryButton${course.courseHash}`} href=\"#\">Попробовать</a>\r\n                </p>\r\n            </div>\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Course","import \"./courses.css\"\r\nimport Course from \"../course/course\";\r\nimport {useState} from 'react'\r\n\r\nconst Courses = props => {\r\n    const courses = props.courses\r\n    const [isRub, setIsRub] = useState(true)\r\n\r\n    return (\r\n        <div className=\"courses\">\r\n            <a\r\n                onClick={e => {e.preventDefault(); setIsRub(!isRub)}}\r\n                className=\"btn-fluid\"\r\n                id={\"tryBtn\"}\r\n                href={\"/\"}>\r\n                {isRub ? \"Рубли\" : \"Бонусы\"}\r\n            </a>\r\n\r\n            <ul className=\"courses-list\" id=\"coursesList\">\r\n                {\r\n                    courses && (\r\n                        courses.map((course, index) => (\r\n                            <li className=\"course-li\" key={index}>\r\n                                <Course isRub={isRub} course={course}/>\r\n                            </li>\r\n                        ))\r\n                    )\r\n                }\r\n            </ul>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Courses","import {useEffect, useState, useCallback} from \"react\";\r\nimport axios from 'axios';\r\nconst https = require('https');\r\n\r\nexport default url => {\r\n    const baseUrl = 'https://krapipl.imumk.ru:8443/api'\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [response, setResponse] = useState(null)\r\n    const [error, setError] = useState(null)\r\n    const [options, setOptions] = useState({})\r\n\r\n    const doFetch = useCallback((options = {}) => {\r\n        setOptions(options)\r\n        setIsLoading(true)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const requestOptions = {\r\n            ...options,\r\n            httpsAgent: new https.Agent({\r\n                rejectUnauthorized: false\r\n            })\r\n        }\r\n\r\n        if (!isLoading) {\r\n            return\r\n        }\r\n\r\n        axios(baseUrl + url, requestOptions, )\r\n            .then(res => {\r\n                console.log('success', res)\r\n                setIsLoading(false)\r\n                setResponse(res.data)\r\n            })\r\n            .catch(error => {\r\n                console.log('error', error)\r\n                setIsLoading(false)\r\n                setError(error)\r\n            })\r\n    }, [isLoading, options, url])\r\n\r\n    return [{isLoading, response, error}, doFetch]\r\n}\r\n","import React from 'react'\r\n\r\nconst ErrorMessage = (props) => {\r\n    return <div>{props.err}</div>\r\n}\r\n\r\nexport default ErrorMessage\r\n","import \"./showcase.css\";\r\nimport FilterCourses from \"./filter-courses/filter\";\r\nimport Courses from \"./courses/courses\";\r\nimport useFetch from \"../hooks/useFetch\";\r\nimport {useEffect, useState} from \"react\";\r\nimport ErrorMessage from \"./errorMessage\";\r\n\r\n\r\nconst Showcase = () => {\r\n    const apiUrl = \"/mobilev1/update\"\r\n    const [{response, error}, doFetch] = useFetch(apiUrl)\r\n\r\n    useEffect(() => {\r\n        doFetch({\r\n            method: 'post',\r\n            data: {\r\n                data: \"\"\r\n            }\r\n        })\r\n    }, [doFetch])\r\n\r\n    const [courses, setCourses] = useState([]);\r\n    const [fetchedCourses, setFetchedCourses] = useState([]);\r\n\r\n    useEffect(() => {\r\n        if (!response) {\r\n            return\r\n        }\r\n\r\n        setFetchedCourses(response.items)\r\n        setCourses(response.items)\r\n    }, [response])\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <h1 className=\"u-text-center\">Витрина</h1>\r\n            <FilterCourses courses={fetchedCourses} setCourses={setCourses}/>\r\n            {error && <ErrorMessage err={error}/>}\r\n\r\n            <Courses  courses={courses}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Showcase","import './App.css';\nimport Showcase from \"./components/showcase\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n            <Showcase/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}